---
title: "Week_5_exercise"
author: "Katz"
date: "2/13/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### Teacher salary linear regression demo  ########


First, read in the data. In this case, the two CSV files are stored in a folder called "data". Be sure to adjust this path however you need.
```{r}
file_path_prin <- "./data/principalSalaries.csv"
file_path_tea <- "./data/teacherSalaries.csv"

principal_salaries <- read_csv(file_path_prin)
teacher_salaries <- read_csv(file_path_tea)
```

#### Try to filter out the public schools and just pick out the average salaries in the 2014-2016 year range (hint: this is stored as "Av14_16P" for principals.)
```{r}
public_schools_principal_salaries <- principal_salaries %>% 
  filter(str_detect(div_name,"Public")) %>%
  select(div_num,Av14_16P)
```


#### Convert the div_num column to numeric
```{r}
public_schools_principal_salaries$div_num <- as.numeric(public_schools_principal_salaries$div_num)
```

#### Repeat the same two steps above for teacher salaries (filter public schools, pick out the 2014-2016 salaries, and convert div_num to numeric)

```{r}
public_schools_teacher_salaries <- teacher_salaries %>% 
  filter(str_detect(div_name,"Public")) %>% 
  select(div_num,Av14_16T)
```


```{r}
public_schools_teacher_salaries$div_num <- as.numeric(public_schools_teacher_salaries$div_num)

```


#### Join the teacher salaries and principal salaries into one dataframe by using an inner_join. You should think about which column to join on (i.e., which to pass to the by = "" argument within inner_join())
```{r}
combined_salaries <- inner_join(public_schools_teacher_salaries,
                                public_schools_principal_salaries,
                                by="div_num")

```



This section helps make tables for formatting in r or printing to csv file to load into excel etc

```{r}
making_a_table <- describe(combined_salaries$Av14_16P) %>%
  select(mean,sd,skew,kurtosis)
```


```{r}
kable(making_a_table) %>% 
  kable_styling("striped", full_width = F) 
```

# table_path <- ""
#write_csv(making.a.table, path = table_path)


# let's talk about running a linear model (simple regression) with the teacher 
# salary data


```{r}
fit1 <- lm(Av14_16P ~ Av14_16T, data=combined_salaries)

summary(fit1)
```




```{r}
combined_salaries %>% 
  ggplot(aes(x = Av14_16T,y = Av14_16P)) +
  geom_point() +
  geom_smooth(method = "lm")
```



```{r}
combined_salaries %>% 
  ggplot(aes(x=div_num,y=Av14_16P)) +
  geom_point() +
  geom_point(aes(x=div_num,y=Av14_16T),colour='blue')
```





